"use strict";var StatusBar=function(){var e={},t=null,n=Front.statusBar;return e.show=function(o,s,i){t&&(clearTimeout(t),t=null);var r=n.querySelectorAll("span");o<0?r.forEach(function(e){setSanitizedContent(e,"")}):setSanitizedContent(r[o],s);for(var a=-1,u=0;u<r.length;u++)r[u].innerHTML.length?(a=u,r[u].style.padding="0px 8px",r[u].style.borderRight="1px solid #999"):(r[u].style.padding="",r[u].style.borderRight="");a===-1?n.style.display="none":(r[a].style.borderRight="",n.style.display="block"),Front.flush(),i&&(t=setTimeout(function(){e.show(o,"")},i))},e}(),Find=function(){function e(){n=null,StatusBar.show(1,""),t.exit()}var t=new Mode("Find","/");t.addEventListener("keydown",function(e){e.sk_suppressed=!0}).addEventListener("mousedown",function(t){t.target!==n&&e(),t.sk_suppressed=!0});var n,o;return t.open=function(){o=-1,StatusBar.show(1,'<input id="sk_find" class="sk_theme"/>'),n=Front.statusBar.querySelector("input"),n.oninput=function(){n.value.length&&"."!==n.value&&Front.visualCommand({action:"visualUpdate",query:n.value})};var s=[];RUNTIME("getSettings",{key:"findHistory"},function(e){s=e.settings.findHistory}),n.onkeydown=function(t){if(Mode.isSpecialKeyOf("<Esc>",t.sk_keyName))e(),Front.visualCommand({action:"visualClear"});else if(t.keyCode===KeyboardUtils.keyCodes.enter){var i=n.value;i.length&&"."!==i&&(t.ctrlKey&&(i="\\b"+i+"\\b"),e(),runtime.updateHistory("find",i),Front.visualCommand({action:"visualEnter",query:i}))}else if((t.keyCode===KeyboardUtils.keyCodes.upArrow||t.keyCode===KeyboardUtils.keyCodes.downArrow)&&s.length){o=t.keyCode===KeyboardUtils.keyCodes.upArrow?o+1:o+s.length-1,o%=s.length;var i=s[o];n.value=i,Front.visualCommand({action:"visualUpdate",query:i}),t.preventDefault()}},n.focus(),t.enter()},t}();